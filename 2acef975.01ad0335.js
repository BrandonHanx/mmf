(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{111:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return g}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),b=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=b(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=b(n),d=a,g=p["".concat(o,".").concat(d)]||p[d]||u[d]||i;return n?r.a.createElement(g,l(l({ref:t},c),{},{components:n})):r.a.createElement(g,l({ref:t},c))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},85:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(3),r=n(8),i=(n(0),n(111)),o={id:"logger",title:"Weights and Biases Logging",sidebar_label:"Weights and Biases Logging"},l={unversionedId:"notes/logger",id:"notes/logger",isDocsHomePage:!1,title:"Weights and Biases Logging",description:"Weights and Biases Logger",source:"@site/docs/notes/logging.md",slug:"/notes/logger",permalink:"/docs/notes/logger",editUrl:"https://github.com/facebookresearch/mmf/edit/main/website/docs/notes/logging.md",version:"current",lastUpdatedBy:"Ayush Thakur",lastUpdatedAt:1637690414,sidebar_label:"Weights and Biases Logging"},s=[{value:"Weights and Biases Logger",id:"weights-and-biases-logger",children:[]},{value:"First time setup",id:"first-time-setup",children:[]},{value:"W&amp;B config parameters",id:"wb-config-parameters",children:[]},{value:"Current features",id:"current-features",children:[]}],c={toc:s};function b(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"weights-and-biases-logger"},"Weights and Biases Logger"),Object(i.b)("p",null,"MMF now has a ",Object(i.b)("inlineCode",{parentName:"p"},"WandbLogger")," class which lets the user to log their model's progress using ",Object(i.b)("a",{parentName:"p",href:"https://wandb.ai/site"},"Weights and Biases"),". Enable this logger to automatically log the training/validation metrics, system (GPU and CPU) metrics and configuration parameters."),Object(i.b)("h2",{id:"first-time-setup"},"First time setup"),Object(i.b)("p",null,"To set up wandb, run the following:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"pip install wandb\n")),Object(i.b)("p",null,"In order to log anything to the W&B server you need to authenticate the machine with W&B ",Object(i.b)("strong",{parentName:"p"},"API key"),". You can create a new account by going to ",Object(i.b)("a",{parentName:"p",href:"https://wandb.ai/signup"},"https://wandb.ai/signup")," which will generate an API key. If you are an existing user you can retrieve your key from ",Object(i.b)("a",{parentName:"p",href:"https://wandb.ai/authorize"},"https://wandb.ai/authorize"),". You only need to supply your key once, and then it is remembered on the same device."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"wandb login\n")),Object(i.b)("h2",{id:"wb-config-parameters"},"W&B config parameters"),Object(i.b)("p",null,"The following options are available in config to enable and customize the wandb logging:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-yaml"},"training:\n    # Weights and Biases control, by default Weights and Biases (wandb) is disabled\n    wandb:\n        # Whether to use Weights and Biases Logger, (Default: false)\n        enabled: true\n        # An entity is a username or team name where you're sending runs.\n        # This is necessary if you want to log your metrics to a team account. By default\n        # it will log the run to your user account.\n        entity: null\n        # Project name to be used while logging the experiment with wandb\n        project: mmf\n        # Experiment/ run name to be used while logging the experiment\n        # under the project with wandb\n        name: ${training.experiment_name}\n        # Specify other argument values that you want to pass to wandb.init(). Check out the documentation\n        # at https://docs.wandb.ai/ref/python/init to see what arguments are available.\n        # job_type: 'train'\n        # tags: ['tag1', 'tag2']\nenv:\n    wandb_logdir: ${env:MMF_WANDB_LOGDIR,}\n")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"To enable wandb logger the user needs to change the following option in the config."),Object(i.b)("p",{parentName:"li"},"  ",Object(i.b)("inlineCode",{parentName:"p"},"training.wandb.enabled=True"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"To give the ",Object(i.b)("inlineCode",{parentName:"p"},"entity")," which is the name of the team or the username, the user needs to change the following option in the config. In case no ",Object(i.b)("inlineCode",{parentName:"p"},"entity")," is provided, the data will be logged to the ",Object(i.b)("inlineCode",{parentName:"p"},"entity")," set as default in the user's settings."),Object(i.b)("p",{parentName:"li"},"  ",Object(i.b)("inlineCode",{parentName:"p"},"training.wandb.entity=<teamname/username>"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"To give the current experiment a project and run name, user should add these config options. The default project name is ",Object(i.b)("inlineCode",{parentName:"p"},"mmf")," and the default run name is ",Object(i.b)("inlineCode",{parentName:"p"},"${training.experiment_name}"),"."),Object(i.b)("p",{parentName:"li"},"  ",Object(i.b)("inlineCode",{parentName:"p"},"training.wandb.project=<ProjectName>")," ",Object(i.b)("br",null),"\n",Object(i.b)("inlineCode",{parentName:"p"},"training.wandb.name=<RunName>"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"To change the path to the directory where wandb metadata would be stored (Default: ",Object(i.b)("inlineCode",{parentName:"p"},"env.log_dir"),"):"),Object(i.b)("p",{parentName:"li"},"  ",Object(i.b)("inlineCode",{parentName:"p"},"env.wandb_logdir=<dir_name>"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"To provide extra arguments to ",Object(i.b)("inlineCode",{parentName:"p"},"wandb.init()"),", the user just needs to define them in the config file. Check out the documentation at ",Object(i.b)("a",{parentName:"p",href:"https://docs.wandb.ai/ref/python/init"},"https://docs.wandb.ai/ref/python/init")," to see what arguments are available. An example is shown in the config parameter shown above. Make sure to use the same key name in the config file as defined in the documentation."))),Object(i.b)("h2",{id:"current-features"},"Current features"),Object(i.b)("p",null,"The following features are currently supported by the ",Object(i.b)("inlineCode",{parentName:"p"},"WandbLogger"),":"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Training & Validation metrics"),Object(i.b)("li",{parentName:"ul"},"Learning Rate over time"),Object(i.b)("li",{parentName:"ul"},"GPU: Type, GPU Utilization, power, temperature, CUDA memory usage"),Object(i.b)("li",{parentName:"ul"},"Log configuration parameters")))}b.isMDXComponent=!0}}]);